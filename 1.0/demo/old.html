<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>demo标题</title>
    <script src="http://a.tbcdn.cn/s/kissy/1.3.0/kissy-min.js" charset="utf-8"></script>
    <link href="../searchbox.css" rel="stylesheet"/>
</head>
<body>
<h2>demo标题</h2>

<div class="search" id="J_Search" role="search">
    <div class="search-triggers">
        <ul class="ks-switchable-nav" id="J_SearchTab">
            <li data-searchtype="item" data-defaultpage="http://list.taobao.com/browse/cat-0.htm" class="selected"><a
                    href="" data-spm-anchor-id="1.1000386.0.34">宝贝</a><!--[if lt IE 9]><s
                    class="search-fix search-fix-triggerlt"></s><s class="search-fix search-fix-triggerrt"></s>
                <![endif]--></li>
            <li data-searchtype="mall" data-action="http://list.tmall.com/search_product.htm"><a href=""
                                                                                                 data-spm-anchor-id="1.1000386.0.35">天猫</a>
                <!--[if lt IE 9]><s class="search-fix search-fix-triggerlt"></s><s
                        class="search-fix search-fix-triggerrt"></s><![endif]--></li>
            <li data-searchtype="shop" data-action="http://shopsearch.taobao.com/browse/shop_search.htm"><a
                    href="">店铺</a><!--[if lt IE 9]><s class="search-fix search-fix-triggerlt"></s><s
                    class="search-fix search-fix-triggerrt"></s><![endif]--></li>
        </ul>
    </div>
    <div class="search-panel ks-switchable-content">
        <form target="_top" action="http://s.taobao.com/search" name="search" id="J_TSearchForm">
            <div class="search-panel-fields">
                <label for="q"><!-- TMS fp2012/search_tips.php -->搜“<span>家装节</span>”试试，3折起盛宴！<!-- END --></label>
                <input id="q" name="q" accesskey="s" autofocus="true" autocomplete="off" x-webkit-speech=""
                       x-webkit-grammar="builtin:translate">
                <s></s>
            </div>
            <button type="submit">搜 索</button>
            <input type="hidden" name="commend" value="all">
            <input type="hidden" name="ssid" value="s5-e" autocomplete="off">
            <input type="hidden" name="search_type" value="mall" autocomplete="off">
            <input type="hidden" name="sourceId" value="tb.index">
            <input type="hidden" name="spm" value="1.1000386.5803581.d4908513">
            <!--[if lt IE 9]><s class="search-fix search-fix-panellt"></s><s class="search-fix search-fix-panellb"></s>
            <![endif]-->
        </form>
    </div>
    <div class="search-tips">
        <a href="http://list.taobao.com/browse/ad_search.htm?spm=1.1000386.0.39.xmo2di">高级搜索</a><br>
        <a href="http://service.taobao.com/support/help-10020.htm">使用帮助</a>
    </div>
    <!-- TMS fp2012/search_hot.php -->
    <div class="search-hots" data-spm="1.186823.220544">
        <a href="http://s.taobao.com/search?spm=1.186823.220544.1&amp;initiative_id=staobaoz_20130520&amp;tab=all&amp;q=%C1%B9%D0%AC+%C5%AE&amp;style=grid&amp;cps=yes&amp;promote=0&amp;v=auction&amp;cd=false&amp;refpid=420460_1006&amp;source=tbsy&amp;pdc=true&amp;style=grid">凉鞋</a>
        <a href="http://s.taobao.com/search?spm=1.186823.220544.2&amp;q=%B6%F9%CD%AF%BD%DA&amp;refpid=420461_1006&amp;source=tbsy&amp;pdc=true&amp;style=grid">儿童节礼品</a>
        <a href="http://s.taobao.com/search?spm=1.186823.220544.3&amp;q=%D1%A9%B7%C4%C9%C0%20%B6%CC%D0%E4&amp;refpid=420462_1006&amp;source=tbsy&amp;pdc=true&amp;style=grid"
           class="h">清凉雪纺</a>
        <a href="http://s.taobao.com/search?spm=1.186823.220544.4&amp;q=%C5%AEt%D0%F4%B6%CC%D0%E4&amp;refpid=420463_1006&amp;source=tbsy&amp;pdc=true&amp;style=grid">短袖T恤</a>
        <a href="http://s.taobao.com/search?spm=1.186823.220544.5&amp;q=%B6%CC%BF%E3+%CF%C4+%C5%AE&amp;refpid=420464_1006&amp;source=tbsy&amp;pdc=true&amp;style=grid">夏季短裤</a>
        <a href="http://s.taobao.com/search?spm=1.186823.220544.6&amp;q=%CD%AF%D7%B0&amp;refpid=420465_1006&amp;source=tbsy&amp;pdc=true&amp;style=grid">童装新品</a>
        <a href="http://s.taobao.com/search?spm=1.186823.220544.7&amp;q=%CD%CF%D0%AC&amp;refpid=420466_1006&amp;source=tbsy&amp;style=grid">拖鞋</a>
        <a href="http://s.taobao.com/search?spm=1.186823.220544.8&amp;q=%C4%D0%CA%BF%B6%CC%D0%E4%B3%C4%C9%C0&amp;refpid=420467_1006&amp;source=tbsy&amp;style=grid&amp;tab=all">男士短袖衬衫</a>
        <a class="more more-with-border" href="http://top.taobao.com/index.php?from=tbsy">更多<s
                class="arrow arrow-rthin"><s></s></s></a>
    </div>
</div>
<script>
    var S = KISSY;
    S.Config.debug = true;
    if (S.Config.debug) {
        var srcPath = "../../../";
        S.config({
            packages: [
                {
                    name: "gallery",
                    path: srcPath,
                    charset: "utf-8",
                    ignorePackageNameInUri: true
                }
            ]
        });
        window.TB = {
            Global: {
                isLogin: function () {
                    return true;
                }
            }
        };
    }
    //代码开始
    var pre = "gallery/searchbox/1.0/",
            mods = [ pre + 'index','suggest.css'],

            srhSuggestCfg = {
                "extra": {
                    "history": !!window.TB && window.TB.Global.isLogin()
                            && !!(mods.push
                            ('plugin/history')),
                    "telephone": !!window.TB && window.TB.Global.isLogin()
                            && !!(mods.push
                            ('plugin/telephone')),
                    "cat": true,
                    "global": true,
                    "new": true,
                    "shop": true,
                    "jipiao": true,
                    "tdg": true,
                    "tab": !!(mods.push
                            ('plugin/tab')),
                    "tipsNotice": !!(mods.push
                            ('plugin/tips-notice'))
                },
                "mods": {
                    "tab": {
                        "activeCls": "selected"
                    }
                },
                "sugConfig": {
                    extraParams: "",
                    sourceUrl: "http://suggest.taobao.com/sug",
                    node: "#q",
                    focused: true,
                    //由于只支持简单的选择器，所以给这里加一个id
                    tablist: "#J_SearchTab li"
                }
            };
    S.use(mods.join("," + pre), function (S, SearchSuggest) {
        var DOM = S.DOM, sug = new SearchSuggest(srhSuggestCfg);
        while (arguments.length > 2) {
            sug.plug(new (Array.prototype.pop.call(arguments)));
        }
        sug.on("beforeFocus", function () {
            var input = sug.get("input"),
            //获取搜索框底纹
                    inputWrap = DOM.parent(input, 2),
                    label = DOM.prev(inputWrap, "label"),
            //底纹上的放大镜图片
                    sImg = DOM.next(inputWrap, "s");
            DOM.hide([label, sImg]);
        })
        sug.on("beforeBlur", function () {
            var input = sug.get("input"),
            //获取搜索框底纹
                    inputWrap = DOM.parent(input, 2),
            //底纹
                    label = DOM.prev(inputWrap, "label"),
            //底纹上的放大镜图片
                    sImg = DOM.next(inputWrap, "s");
            if (S.trim(sug.query) === "") {
                DOM.show([label, sImg]);

            }
        })
    })
</script>

</body>
</html>
